var e=Object.defineProperty,r=Object.defineProperties,t=Object.getOwnPropertyDescriptors,s=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,o=(r,t,s)=>t in r?e(r,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[t]=s;import{j as c}from"./ui-c9cf61f3.js";import{r as n}from"./react-b06bd742.js";import{H as l}from"./helmet-74cef20f.js";import{a as d,B as m,s as u}from"./index-32bd60cb.js";import{ResumePreview as p}from"./ResumePreview-e6de4c13.js";import{u as j}from"./router-f4cf630b.js";import"./supabase-58c16b84.js";import"./utils-a6b5387a.js";import"./icons-67a24831.js";import"./animation-2247ff6b.js";function x(){const{user:e}=d(),x=j(),[h,f]=n.useState([]),[v,y]=n.useState(!0);return n.useEffect(()=>{(()=>{return c=this,n=null,l=function*(){if(!e)return void y(!1);const{data:c,error:n}=yield u.from("curriculos").select("id, data, created_at").eq("user_id",e.id).order("created_at",{ascending:!1});if(n);else{const e=c.map(e=>{return c=((e,r)=>{for(var t in r||(r={}))a.call(r,t)&&o(e,t,r[t]);if(s)for(var t of s(r))i.call(r,t)&&o(e,t,r[t]);return e})({},e),n={data:"string"==typeof e.data?JSON.parse(e.data):e.data},r(c,t(n));var c,n});f(e)}y(!1)},new Promise((e,r)=>{var t=e=>{try{a(l.next(e))}catch(t){r(t)}},s=e=>{try{a(l.throw(e))}catch(t){r(t)}},a=r=>r.done?e(r.value):Promise.resolve(r.value).then(t,s);a((l=l.apply(c,n)).next())});var c,n,l})()},[e]),e?c.jsxs(c.Fragment,{children:[c.jsx(l,{children:c.jsx("title",{children:"Histórico de Currículos"})}),c.jsxs("div",{className:"min-h-screen p-4 max-w-4xl mx-auto",children:[c.jsx("h1",{className:"text-3xl font-bold text-white mb-6",children:"Histórico de Currículos"}),v?c.jsx("p",{className:"text-gray-300",children:"Carregando..."}):0===h.length?c.jsx("p",{className:"text-gray-300",children:"Nenhum currículo encontrado."}):c.jsx("div",{className:"space-y-6",children:h.map(e=>c.jsxs("div",{className:"glass-effect p-4 rounded-xl",children:[c.jsx("p",{className:"text-gray-400 text-sm mb-4",children:new Date(e.created_at).toLocaleString()}),c.jsx(p,{data:e.data})]},e.id))}),c.jsx("div",{className:"mt-8 text-center",children:c.jsx(m,{onClick:()=>x("/"),children:"Criar Novo Currículo"})})]})]}):c.jsxs("div",{className:"min-h-screen flex items-center justify-center p-4",children:[c.jsx(l,{children:c.jsx("title",{children:"Histórico de Currículos"})}),c.jsx("p",{className:"text-gray-300",children:"É necessário estar logado para visualizar o histórico."})]})}export{x as default};
